{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
  <title>School management &mdash; Faris Rabo</title>

  <!-- General CSS Files -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="{% static 'modules/bootstrap/css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'modules/fontawesome/css/all.min.css' %}">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="{% static 'css/style2.css' %}">
  <link rel="stylesheet" href="{% static 'css/style3.css' %}">
  <link rel="stylesheet" href="{% static 'css/components.css' %}">
  <link rel="stylesheet"
  href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
  rel="stylesheet" crossorigin="anonymous">
  <link href="{% static 'node_modules/bootstrap/dist/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'formset/css/collections.css' %}" rel="stylesheet">
  <link href="{% static 'formset/css/bootstrap5-extra.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/style.css' %}">



  {% block stylesheet %}
    
  {% endblock stylesheet %}


</head>

<body>
  <div id="app">
    {% include 'components/navbar.html' %}
    <div class="main-wrapper main-wrapper-1">
      <div class="main-content">

        {% block breadcrumb %}
        <div class="breadcrumb-container">
            <ul class="breadcrumb">
                <li><a href="{% url 'index-view' %}"><i class="fa fa-home"></i> Accueil</a></li>
            </ul>
        </div>
        {% endblock breadcrumb %}
        {% block content %}


      <button class="tooltip" data-tooltip="Ceci est un exemple d'infobulle.">Survolez-moi</button>

    
        {% endblock content %}
      </div>
      {% include 'components/sidebar.html' %}
    </div>
  </div>



  <!-- General JS Scripts -->
  <script type="text/javascript" src="{% url 'javascript-catalog' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/jquery.min.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/popper.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/tooltip.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/nicescroll/jquery.nicescroll.min.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/moment.min.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'js/stisla.js' %}"></script>
  
  <!-- JS Libraies -->
  <script nonce="random_nonce_value" src="{% static 'modules/jquery.sparkline.min.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/chart.min.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/owlcarousel2/dist/owl.carousel.min.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/summernote/summernote-bs4.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/chocolat/dist/js/jquery.chocolat.min.js' %}"></script>

  <!-- Page Specific JS File -->
  
  <!-- Template JS File -->

  <script nonce="random_nonce_value" src="{% static 'js/custom.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'js/scripts.js' %}" crossorigin="anonymous"></script>
  <script nonce="random_nonce_value" src="{% static 'modules/bootstrap/js/bootstrap.min.js' %}"></script>
  <script type="module" src="{% static 'formset/js/django-formset.js' %}"></script>
  <script nonce="random_nonce_value" src="{% static 'js/page/index.js' %}"></script>


 
  
<!-- Modal Structure -->
<div class="modal fade" id="dynamicModal" tabindex="-1" aria-labelledby="dynamicModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="dynamicModalLabel">Chargement...</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="modalContent">
          <!-- Contenu dynamique chargé ici -->
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Sélectionnez les boutons qui doivent ouvrir le modal
    const saveButtons = document.querySelectorAll('button[data-bs-save]');

    saveButtons.forEach(button => {
      button.addEventListener('click', function (e) {
        e.preventDefault();

        // Récupération de la route à charger
        const endpoint = this.dataset.route;
        const modal = new bootstrap.Modal(document.getElementById('dynamicModal'));
        const modalContent = document.getElementById('modalContent');

        // Afficher le modal
        modal.show();

        // Indique que le contenu est en chargement
        modalContent.innerHTML = '<p>Chargement...</p>';

        // Charger dynamiquement le contenu
        fetch(endpoint)
          .then(response => {
            if (!response.ok) {
              throw new Error('Erreur lors du chargement du contenu.');
            }
            return response.text();
          })
          .then(html => {
            modalContent.innerHTML = html;
          })
          .catch(error => {
            modalContent.innerHTML = `<p class="text-danger">Erreur : ${error.message}</p>`;
          });
      });
    });
  });
</script>
