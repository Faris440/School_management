{% extends "models/list.html" %}
{% load icon %}
{% load humanize %}
{% load static %}

{% block breadcrumb %}
    <div class="breadcrumb-container">
        <ul class="breadcrumb">
            <li><a href="{% url 'index-view' %}"><i class="fa fa-home"></i> Accueil</a></li>
            <li><a href="#">Détail</a></li>
            <li class="active">{{ object.name }}</li>
        </ul>
    </div>
{% endblock %}




{% block table-headers %}
<th>Enseignant</th>
<th>Filière</th>
<th>Debut de la periode</th>
<th>Fin de la periode</th>
<th>Statut</th> <!-- Nouvelle colonne pour le statut -->
{% endblock table-headers %}

{% block table-rows %}
<td>{{ object.enseignant }}</td>
<td>{{ object.filiere }}</td>
<td>{{ object.date_debut }}</td>
<td>{{ object.date_fin }}</td>
<td>
    
    {% if object.validate_by_responsable_filiere is None %}
    Niveau filiere : <span class="text-warning">En cours de traitement</span> 
    {% elif object.validate_by_responsable_filiere is False %} 
    Niveau filiere : <span class="text-warning">Fiche rejetée</span> 
    {% else %}
        
        {% if object.is_permanent %}
            {% if object.validate_by_responsable_ufr is None %}
            Niveau UFR : <span class="text-warning">En cours de traitement</span> 
            {% elif object.validate_by_responsable_ufr is False %} 
            Niveau UFR : <span class="text-warning">Fiche rejetée</span> 
            {% else %}
                {% if object.validate_by_vice_presient is None %}
                Niveau Vice Presidence : <span class="text-warning">En cours de traitement</span> 
                {% elif object.validate_by_vice_presient is False %} 
                Niveau Vice Présidence : <span class="text-warning">Fiche rejetée</span> 
                {% else %}
                
                Niveau Vice Présidence : <span class="text-warning">Fiche acceptée</span> 
                {% endif %} 
            {% endif %}
        {% else %}
        {% if object.validate_by_vice_presient is None %}
                Niveau Vice Presidence : <span class="text-warning">En cours de traitement</span> 
                {% elif object.validate_by_vice_presient is False %} 
                Niveau Vice Présidence : <span class="text-warning">Fiche rejetée</span> 
                {% else %}
                
                Niveau Vice Présidence : <span class="text-warning">Fiche acceptée</span> 
                {% endif %} 
        {% endif %}
            
    {% endif %}
        
</td> <!-- Affichage du statut -->
{% endblock table-rows %}


{% block javascript %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    // Fonction pour la recherche dans le tableau
    document.getElementById('searchInput').addEventListener('keyup', function() {
        let searchValue = this.value.toLowerCase();
        let rows = document.querySelectorAll('tbody tr');

        rows.forEach(row => {
            let code = row.cells[1].textContent.toLowerCase();
            let semestres = row.cells[2].textContent.toLowerCase();
            let label = row.cells[3].textContent.toLowerCase();

            if (code.includes(searchValue) || semestres.includes(searchValue) || label.includes(searchValue) ) {
                row.style.display = '';
            } else {
                row.style.display = 'none';
            }
        });
    });
</script>
{% endblock javascript %}


{% block stylesheet%}
<style>
/* Styles spécifiques pour le breadcrumb dans le conteneur */
.breadcrumb-container {
    margin: 20px 0; /* Pour séparer le breadcrumb des autres éléments */
}

.breadcrumb-container .breadcrumb {
    list-style: none;
    padding: 0;
    margin: 0;
    background-color: #f8f9fa;
    border-radius: 5px;
    display: flex;
    align-items: center;
}

.breadcrumb-container .breadcrumb li {
    display: inline;
    margin-right: 10px;
}

.breadcrumb-container .breadcrumb li a {
    text-decoration: none;
    color: #007bff;
}

.breadcrumb-container .breadcrumb li a:hover {
    text-decoration: underline;
}

/* Remplacer le séparateur par un slash */
.breadcrumb-container .breadcrumb li + li:before {
    content: " / ";  /* Le séparateur est un slash */
    margin-left: 10px;
    color: #6c757d;
}

.breadcrumb-container .breadcrumb li.active {
    color: #6c757d;
    font-weight: bold;
}

.breadcrumb-container .breadcrumb li a i {
    margin-right: 5px;
}
</style>
{% endblock stylesheet%}
